#!/bin/bash
# TCP/IP μ†μΌ“ ν”„λ΅κ·Έλλ° ν…μ¤νΈ μ¤ν¬λ¦½νΈ

echo "β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•"
echo "    TCP/IP μ†μΌ“ ν”„λ΅κ·Έλλ° ν…μ¤νΈ μ‹μ‘"
echo "β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•"
echo ""

# 1. Time μ„λ²„ ν…μ¤νΈ
echo "π“ 1. Time μ„λ²„ ν…μ¤νΈ"
echo "β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€"
echo "[μ„λ²„ μ‹μ‘]"
cd /tmp/tcp_socket_programming/1_time_server
python3 time_server.py &
SERVER_PID=$!
sleep 2

echo ""
echo "[ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰]"
python3 time_client.py 127.0.0.1
sleep 1

echo ""
echo "[μ„λ²„ μΆ…λ£]"
kill $SERVER_PID 2>/dev/null
wait $SERVER_PID 2>/dev/null
echo ""
echo "β… Time μ„λ²„ ν…μ¤νΈ μ™„λ£"
echo ""
sleep 2

# 2. Echo μ„λ²„ ν…μ¤νΈ
echo "β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•"
echo "π“ 2. Echo μ„λ²„ ν…μ¤νΈ"
echo "β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€"
echo "[μ„λ²„ μ‹μ‘]"
cd /tmp/tcp_socket_programming/2_echo_server
python3 echo_server.py &
SERVER_PID=$!
sleep 2

echo ""
echo "[ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ - μλ™ ν…μ¤νΈ]"
(
  sleep 1
  echo "μ•λ…•ν•μ„Έμ”"
  sleep 1
  echo "Hello World"
  sleep 1
  echo "ν…μ¤νΈ λ©”μ‹μ§€"
  sleep 1
  echo "quit"
) | python3 echo_client.py 127.0.0.1
sleep 1

echo ""
echo "[μ„λ²„ μΆ…λ£]"
kill $SERVER_PID 2>/dev/null
wait $SERVER_PID 2>/dev/null
echo ""
echo "β… Echo μ„λ²„ ν…μ¤νΈ μ™„λ£"
echo ""
sleep 2

# 3. Number μ„λ²„ ν…μ¤νΈ
echo "β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•"
echo "π“ 3. Number μ„λ²„ ν…μ¤νΈ"
echo "β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€"
echo "[μ„λ²„ μ‹μ‘]"
cd /tmp/tcp_socket_programming/3_number_server
python3 number_server.py &
SERVER_PID=$!
sleep 2

echo ""
echo "[ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰ - μλ™ ν…μ¤νΈ]"
(
  sleep 1
  echo "50"
  sleep 1
  echo "25"
  sleep 1
  echo "75"
  sleep 1
  echo "60"
  sleep 1
  echo "quit"
) | python3 number_client.py 127.0.0.1
sleep 1

echo ""
echo "[μ„λ²„ μΆ…λ£]"
kill $SERVER_PID 2>/dev/null
wait $SERVER_PID 2>/dev/null
echo ""
echo "β… Number μ„λ²„ ν…μ¤νΈ μ™„λ£"
echo ""

echo "β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•"
echo "    λ¨λ“  ν…μ¤νΈ μ™„λ£!"
echo "β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•"

